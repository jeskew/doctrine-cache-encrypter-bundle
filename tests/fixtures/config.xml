<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:framework="http://symfony.com/schema/dic/symfony">

    <framework:config secret="Roger Kint is Keyser Soze."/>

    <services>
        <service id="key_factory" class="KeyFactory"/>
        <service
                id="my_public_key"
                class="Array"
                factory-service="key_factory"
                factory-method="getCertificate" />
        <service
                id="my_private_key"
                class="Array"
                factory-service="key_factory"
                factory-method="getPrivateKey" />
        <service id="cache" class="Doctrine\Common\Cache\ArrayCache">
            <tag name="cache.encrypted" password="a"/>
            <tag name="cache.encrypted" password="b" alias="my_encrypted_cache"/>
            <tag
                    name="cache.encrypted"
                    certificate="@my_public_key"
                    key="@my_private_key"
                    alias="my_pki_encrypted_cache"/>
        </service>
    </services>
</container>
